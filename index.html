<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>مولّد الصفحة الشخصية</title>
<style>
body { font-family: 'Tahoma', sans-serif; background: #f9f9f9; margin: 0; padding: 20px; }
.container { max-width: 900px; margin: auto; background: #fff; padding: 20px 30px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
form { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
input, textarea, button, select { padding: 10px; border-radius: 8px; border: 1px solid #ccc; }
button { background: #c8102e; color: #fff; font-weight: bold; border: none; cursor: pointer; }
button:hover { background: #a50b24; }
iframe { width: 100%; height: 700px; border: 1px solid #ccc; border-radius: 12px; margin-top: 20px; }
.lang-btns { display: flex; gap: 10px; margin-top: 10px; }
.lang-btns button { background: #eee; color: #333; font-weight: bold; border: 1px solid #ccc; padding: 8px; cursor: pointer; }
.lang-btns button.active { background: #c8102e; color: white; }
</style>
</head>
<body>

<div class="container">
<h1>مولّد الصفحة الشخصية متعدد اللغات</h1>

<form id="profileForm">
<input type="text" id="name" placeholder="اسم الرئيس">
<textarea id="bio" placeholder="نبذة تعريفية" rows="3"></textarea>
<textarea id="experience" placeholder="الخبرات (سطر بسطر)" rows="3"></textarea>
<textarea id="achievements" placeholder="الإنجازات (سطر بسطر)" rows="3"></textarea>
<input type="text" id="email" placeholder="example@email.com">
<input type="text" id="phone" placeholder="0000-0000">
<label>رفع الصورة الشخصية</label><input type="file" id="profileImg" accept="image/*">
<label>رفع شعار الاتحاد</label><input type="file" id="logoImg" accept="image/*">
<label>رفع ملف CV</label><input type="file" id="cvFile" accept=".pdf">
<button type="button" onclick="generatePage()">توليد الصفحة</button>
</form>

<div class="preview">
<h2>معاينة الصفحة</h2>
<iframe id="previewFrame"></iframe>
<button onclick="downloadPage()">تحميل HTML النهائي</button>
</div>

<script>
let lastHTML = "";

// الترجمات الافتراضية لكل لغة
const translations = {
  ar: {bio:"نبذة تعريفية افتراضية.", experience:["16 سنة رئيس الاتحاد البحريني لكرة اليد."], achievements:["تأسيس أكاديمية كرة اليد","تنظيم بطولات محلية ودولية"]},
  en: {bio:"Default profile bio.", experience:["16 years president of Bahrain Handball Federation."], achievements:["Founded Handball Academy","Organized local and international tournaments"]},
  fr: {bio:"Biographie par défaut.", experience:["16 ans président de la Fédération bahreïnie de handball."], achievements:["Fondation de l'académie de handball","Organisation de tournois locaux et internationaux"]},
  es: {bio:"Biografía por defecto.", experience:["16 años presidente de la Federación de Balonmano de Baréin."], achievements:["Fundación de la academia de balonmano","Organización de torneos locales e internacionales"]},
  de: {bio:"Standardbiografie.", experience:["16 Jahre Präsident des Bahrain Handballverbands."], achievements:["Gründung der Handballakademie","Organisation lokaler und internationaler Turniere"]}
};

// تحويل الملفات إلى Base64
function fileToBase64(file){
    return new Promise((resolve, reject)=>{
        if(!file){ resolve(''); return; }
        const reader = new FileReader();
        reader.onload = ()=>resolve(reader.result);
        reader.onerror = ()=>reject("فشل تحميل الملف: "+file.name);
        reader.readAsDataURL(file);
    });
}

// توليد الصفحة
async function generatePage(){
    try {
        const name = document.getElementById('name').value || "اسم الرئيس";
        const email = document.getElementById('email').value || "example@email.com";
        const phone = document.getElementById('phone').value || "0000-0000";

        const profileFile = document.getElementById('profileImg').files[0];
        const logoFile = document.getElementById('logoImg').files[0];
        const cvFile = document.getElementById('cvFile').files[0];

        const profileBase64 = await fileToBase64(profileFile);
        const logoBase64 = await fileToBase64(logoFile);
        const cvBase64 = await fileToBase64(cvFile);

        lastHTML = `
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head><meta charset="UTF-8"><title>${name}</title></head>
<body style="font-family:sans-serif;padding:20px;background:#f9f9f9;">
<header style="text-align:center;background:#c8102e;color:white;padding:20px;border-radius:15px;">
<img src="${profileBase64}" alt="الصورة الشخصية" style="width:150px;border-radius:50%;border:3px solid white;"><br>
<h1>${name}</h1>
<h3>رئيس الاتحاد البحريني لكرة اليد</h3>
<img src="${logoBase64}" alt="شعار الاتحاد" style="width:80px;margin-top:10px;">
</header>
<div style="margin-top:20px;">
<h2>نبذة تعريفية</h2>
<p id="bioBox">${translations.ar.bio}</p>
<h2>الخبرات</h2>
<ul id="expList">${translations.ar.experience.map(e=>`<li>${e}</li>`).join('')}</ul>
<h2>الإنجازات</h2>
<ul id="achList">${translations.ar.achievements.map(a=>`<li>${a}</li>`).join('')}</ul>
<h2>السيرة الذاتية</h2>
<a href="${cvBase64}" download="${name}_CV.pdf">تحميل ملف السيرة الذاتية (CV)</a>

<div class="lang-btns" style="margin-top:20px;">
<button onclick="setLang('ar')">AR</button>
<button onclick="setLang('en')">EN</button>
<button onclick="setLang('fr')">FR</button>
<button onclick="setLang('es')">ES</button>
<button onclick="setLang('de')">DE</button>
</div>
</div>

<script>
const translationsData = ${JSON.stringify(translations)};
function setLang(lang){
    document.body.dir = (lang==='ar')?'rtl':'ltr';
    document.getElementById('bioBox').textContent = translationsData[lang].bio;
    document.getElementById('expList').innerHTML = translationsData[lang].experience.map(e=>\`<li>\${e}</li>\`).join('');
    document.getElementById('achList').innerHTML = translationsData[lang].achievements.map(a=>\`<li>\${a}</li>\`).join('');
}
</script>
</body>
</html>
        `;

        document.getElementById('previewFrame').srcdoc = lastHTML;

    } catch(err) {
        alert(err);
    }
}

// تحميل الصفحة النهائية
function downloadPage(){
    if(!lastHTML){ alert("يجب توليد الصفحة أولاً"); return; }
    const blob = new Blob([lastHTML], {type:"text/html"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = "profile_page.html";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}
</script>

</body>
</html>
