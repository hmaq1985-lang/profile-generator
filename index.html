<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ù†Ø¸Ø§Ù… Ø¥Ù†Ø´Ø§Ø¡ ØµÙØ­Ø© Ø´Ø®ØµÙŠØ© â€“ Ø°ÙƒÙŠ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    body { font-family: Arial; margin: 0; padding: 0; background:#f5f5f5; }
    header { background:#002b5c; color:white; padding:15px; text-align:center; }
    .container { max-width:900px; margin:20px auto; background:white; padding:20px;
                 border-radius:12px; box-shadow:0 0 10px #ccc; }

    h2 { color:#002b5c; }

    input, textarea { width:100%; padding:10px; margin:6px 0;
                      border:1px solid #ccc; border-radius:6px; }

    button {
        padding:10px 20px; background:#002b5c; color:white; border:0;
        border-radius:6px; cursor:pointer; margin-top:10px;
    }
    button:hover { background:#004a9f; }

    #preview {
        margin-top:30px; padding:20px; border-radius:12px;
        background:#fff; box-shadow:0 0 10px #ccc;
    }

    .lang-buttons button{
        background:#444;
        margin-left:5px;
    }
</style>
</head>

<body>

<header>
    <h1>ğŸ”§ Ù„ÙˆØ­Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©</h1>
</header>

<div class="container">

<h2>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h2>

<label>Ø§Ù„Ø§Ø³Ù…</label>
<input id="name">

<label>Ø§Ù„Ù…Ù†ØµØ¨</label>
<input id="title">

<label>Ù†Ø¨Ø°Ø© ØªØ¹Ø±ÙŠÙÙŠØ©</label>
<textarea id="bio" rows="4"></textarea>

<label>Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</label>
<textarea id="achievements" rows="5"></textarea>

<label>Ø§Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©</label>
<input type="file" id="photo" accept="image/*">

<label>Ø§Ø±ÙØ¹ Ø´Ø¹Ø§Ø± Ø§Ù„Ø§ØªØ­Ø§Ø¯</label>
<input type="file" id="logo" accept="image/*">

<label>Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© (PDF Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
<input type="file" id="cv" accept="application/pdf">

<br><br>
<button onclick="generatePage()">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©</button>

<hr>

<h2>ğŸ¨ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙØ­Ø©</h2>
<div id="preview"></div>

</div>

<script>
let languages = {
    ar: { dir:"rtl", name:"Ø§Ù„Ø§Ø³Ù…", title:"Ø§Ù„Ù…Ù†ØµØ¨", bio:"Ù†Ø¨Ø°Ø©", achievements:"Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª" },
    en: { dir:"ltr", name:"Name", title:"Position", bio:"Bio", achievements:"Achievements" },
    fr: { dir:"ltr", name:"Nom", title:"Poste", bio:"Biographie", achievements:"RÃ©alisations" },
    es: { dir:"ltr", name:"Nombre", title:"Cargo", bio:"BiografÃ­a", achievements:"Logros" },
    de: { dir:"ltr", name:"Name", title:"Position", bio:"Biografie", achievements:"Erfolge" },
};

let currentLang = "ar";

function base64(file){
    return new Promise((ok)=>{
        let r = new FileReader();
        r.onload = ()=>ok(r.result);
        r.readAsDataURL(file);
    });
}

async function generatePage(){
    let name = document.getElementById("name").value;
    let title = document.getElementById("title").value;
    let bio = document.getElementById("bio").value;
    let achievements = document.getElementById("achievements").value;

    let photoFile = document.getElementById("photo").files[0];
    let logoFile  = document.getElementById("logo").files[0];
    let cvFile    = document.getElementById("cv").files[0];

    let photo = photoFile ? await base64(photoFile) : "";
    let logo  = logoFile  ? await base64(logoFile)  : "";
    let cv    = cvFile    ? await base64(cvFile)    : "";

    let html = `
<!DOCTYPE html>
<html lang="${currentLang}" dir="${languages[currentLang].dir}">
<head>
<meta charset="UTF-8"/>
<title>${name}</title>
<style>
    body { font-family:Arial; background:#f7f7f7; margin:0; padding:0; }
    .header { display:flex; justify-content:space-between; align-items:center;
              background:#002b5c; color:white; padding:20px; }
    .header img { height:70px; }
    .content { max-width:900px; margin:30px auto; background:white; padding:25px;
               border-radius:12px; box-shadow:0 0 10px #ccc; }
    h1 { color:#002b5c; }
    .photo { text-align:center; margin-top:20px; }
    .photo img { width:200px; height:200px; border-radius:50%; object-fit:cover; }
    .langs button {
        margin:5px; padding:8px 15px; border:0; background:#444; color:white;
        border-radius:6px; cursor:pointer;
    }
</style>

<script>
function setLang(l){
    window.location.search = "lang="+l;
}
</script>

</head>
<body>

<div class="header">
    <h2>${name}</h2>
    ${logo ? `<img src="${logo}">` : ""}
</div>

<div class="langs" style="text-align:center; margin-top:15px;">
    <button onclick="setLang('ar')">Ø¹Ø±Ø¨ÙŠ</button>
    <button onclick="setLang('en')">English</button>
    <button onclick="setLang('fr')">FranÃ§ais</button>
    <button onclick="setLang('es')">EspaÃ±ol</button>
    <button onclick="setLang('de')">Deutsch</button>
</div>

<div class="content">

<div class="photo">
${photo ? `<img src="${photo}">` : ""}
</div>

<h1>${languages[currentLang].name}: ${name}</h1>
<h3>${languages[currentLang].title}: ${title}</h3>

<h2>${languages[currentLang].bio}</h2>
<p>${bio}</p>

<h2>${languages[currentLang].achievements}</h2>
<p>${achievements.replace(/\n/g,"<br>")}</p>

${cv ? `<a href="${cv}" download="cv.pdf">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©</a>` : ""}

</div>
</body>
</html>
    `;

    document.getElementById("preview").innerText = "âœ” ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙØ­Ø© â€” Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø£Ø¯Ù†Ø§Ù‡";

    // Ø­ÙØ¸ Ø¢Ø®Ø± ØµÙØ­Ø©
    localStorage.setItem("generated_page", html);

    // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
    document.getElementById("preview").innerHTML = `
        <p><b>âœ” Ø§Ù„ØµÙØ­Ø© Ø¬Ø§Ù‡Ø²Ø©</b></p>
        <button onclick="downloadFinal()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</button>
    `;

}

function downloadFinal(){
    let html = localStorage.getItem("generated_page");
    let blob = new Blob([html], {type:"text/html"});
    let url = URL.createObjectURL(blob);

    let a = document.createElement("a");
    a.href = url;
    a.download = "profile_page.html";
    a.click();
    URL.revokeObjectURL(url);
}
</script>

</body>
</html>
