<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>مولّد الصفحة الشخصية متعدد اللغات</title>
<style>
body { font-family: 'Tahoma', sans-serif; background:#f9f9f9; margin:0; padding:20px; transition: all 0.3s;}
h1,h2,h3 { margin:5px 0; }
.container { max-width:900px; margin:auto; background:#fff; padding:20px 30px; border-radius:15px; box-shadow:0 4px 20px rgba(0,0,0,0.1); }
form { display:flex; flex-direction:column; gap:10px; margin-bottom:30px;}
input,textarea,button,select { padding:10px; border-radius:8px; border:1px solid #ccc; }
button { background:#c8102e; color:#fff; font-weight:bold; border:none; cursor:pointer; }
button:hover { background:#a50b24; }
.preview { margin-top:20px; }
iframe { width:100%; height:700px; border:1px solid #ccc; border-radius:12px; }
.lang-btns { display:flex; gap:10px; margin-bottom:10px;}
.lang-btns button { background:#eee; color:#333; font-weight:bold; border:1px solid #ccc; }
.lang-btns button.active { background:#c8102e; color:white; }
</style>
</head>
<body>
<div class="container">
<h1>مولّد الصفحة الشخصية متعدد اللغات</h1>

<form id="profileForm">
<input type="text" id="name" placeholder="اسم الرئيس" required>
<textarea id="bio" placeholder="نبذة تعريفية" rows="3"></textarea>
<textarea id="experience" placeholder="الخبرات (سطر بسطر)" rows="3"></textarea>
<textarea id="achievements" placeholder="الإنجازات (سطر بسطر)" rows="3"></textarea>
<input type="text" id="email" placeholder="example@email.com">
<input type="text" id="phone" placeholder="0000-0000">
<label>رفع الصورة الشخصية</label><input type="file" id="profileImg" accept="image/*">
<label>رفع شعار الاتحاد</label><input type="file" id="logoImg" accept="image/*">
<label>رفع ملف CV</label><input type="file" id="cvFile" accept=".pdf">
<button type="button" onclick="generatePage()">توليد الصفحة</button>
</form>

<div class="preview">
<h2>معاينة الصفحة</h2>
<iframe id="previewFrame"></iframe>
<button onclick="downloadPage()">تحميل HTML النهائي</button>
</div>
</div>

<script>
let lastHTML="";

const translations = {
  ar: {bio:"نبذة تعريفية افتراضية.", experience:["16 سنة رئيس الاتحاد البحريني لكرة اليد."], achievements:["تأسيس أكاديمية كرة اليد","تنظيم بطولات محلية ودولية"]},
  en: {bio:"Default profile bio.", experience:["16 years president of Bahrain Handball Federation."], achievements:["Founded Handball Academy","Organized local and international tournaments"]},
  fr: {bio:"Biographie par défaut.", experience:["16 ans président de la Fédération bahreïnie de handball."], achievements:["Fondation de l'académie de handball","Organisation de tournois locaux et internationaux"]},
  es: {bio:"Biografía por defecto.", experience:["16 años presidente de la Federación de Balonmano de Baréin."], achievements:["Fundación de la academia de balonmano","Organización de torneos locales e internacionales"]},
  de: {bio:"Standardbiografie.", experience:["16 Jahre Präsident des Bahrain Handballverbands."], achievements:["Gründung der Handballakademie","Organisation lokaler und internationaler Turniere"]}
};

function fileToBase64(file, callback){
    if(!file){callback(''); return;}
    const reader = new FileReader();
    reader.onload = ()=>callback(reader.result);
    reader.readAsDataURL(file);
}

function generatePage(){
    const name = document.getElementById('name').value || "اسم الرئيس";
    const email = document.getElementById('email').value || "example@email.com";
    const phone = document.getElementById('phone').value || "0000-0000";

    const profileFile = document.getElementById('profileImg').files[0];
    const logoFile = document.getElementById('logoImg').files[0];
    const cvFile = document.getElementById('cvFile').files[0];

    fileToBase64(profileFile, profileBase64=>{
    fileToBase64(logoFile, logoBase64=>{
    fileToBase64(cvFile, cvBase64=>{
        let html = `
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${name}</title>
<style>
body{font-family:'Tahoma',sans-serif;background:#f9f9f9;margin:0;padding:20px;transition: all 0.3s;}
header{background:#c8102e;color:white;padding:30px;text-align:center;}
header img.profile-img{width:160px;height:160px;border-radius:50%;border:4px solid white;object-fit:cover;}
header img.logo{width:80px;margin-top:15px;}
header h1{margin:10px 0;font-size:28px;}
header h3{margin:0;font-weight:normal;font-size:18px;}
.container{max-width:900px;margin:20px auto;padding:0 20px;}
.section{margin-top:30px;}
.section h2{font-size:22px;border-right:5px solid #c8102e;padding-right:10px;margin-bottom:10px;}
.info-box{background:#fff0f1;padding:15px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.05);}
.info-box ul{margin:0;padding-right:20px;}
.cv-link a{display:inline-block;padding:10px 15px;background:#c8102e;color:white;text-decoration:none;border-radius:10px;margin-top:10px;}
.cv-link a:hover{background:#a50b24;}
.contact{margin-top:20px;display:flex;justify-content:center;gap:20px;flex-wrap:wrap;}
.contact a{color:#c8102e;font-size:18px;text-decoration:none;transition:color 0.2s;}
.contact a:hover{color:#a50b24;}
.lang-btns{display:flex;gap:10px;margin-bottom:10px;}
.lang-btns button{background:#eee;color:#333;font-weight:bold;border:1px solid #ccc;}
.lang-btns button.active{background:#c8102e;color:white;}
</style>
</head>
<body>
<header>
<img class="profile-img" src="${profileBase64}" alt="الصورة الشخصية">
<h1>${name}</h1>
<h3>رئيس الاتحاد البحريني لكرة اليد</h3>
<img class="logo" src="${logoBase64}" alt="شعار الاتحاد">
</header>
<div class="container">
<div class="section"><h2>نبذة تعريفية</h2><div class="info-box" id="bioBox">${translations.ar.bio}</div></div>
<div class="section"><h2>الخبرات</h2><div class="info-box"><ul id="expList">${translations.ar.experience.map(e=>`<li>${e}</li>`).join('')}</ul></div></div>
<div class="section"><h2>الإنجازات</h2><div class="info-box"><ul id="achList">${translations.ar.achievements.map(a=>`<li>${a}</li>`).join('')}</ul></div></div>
<div class="section cv-link"><a href="${cvBase64}" download="${name}_CV.pdf">تحميل ملف السيرة الذاتية (CV)</a></div>
<div class="section contact">
<a href="mailto:${email}"><i class="fas fa-envelope"></i> البريد الإلكتروني</a>
<a href="tel:${phone}"><i class="fas fa-phone"></i> الهاتف</a>
</div>
<div class="lang-btns">
<button onclick="setLang('ar')">AR</button>
<button onclick="setLang('en')">EN</button>
<button onclick="setLang('fr')">FR</button>
<button onclick="setLang('es')">ES</button>
<button onclick="setLang('de')">DE</button>
</div>
</div>
<script>
const translationsData = ${JSON.stringify(translations)};
function setLang(lang){
    const rtl = (lang==='ar');
    document.body.dir = rtl ? 'rtl':'ltr';
    document.getElementById('bioBox').textContent = translationsData[lang].bio;
    document.getElementById('expList').innerHTML = translationsData[lang].experience.map(e=>`<li>${e}</li>`).join('');
    document.getElementById('achList').innerHTML = translationsData[lang].achievements.map(a=>`<li>${a}</li>`).join('');
}
</script>
</body>
</html>
`;
        lastHTML = html;
        document.getElementById('previewFrame').srcdoc = html;
    })})});
}

function downloadPage(){
    if(!lastHTML){ alert("يجب توليد الصفحة أولاً"); return; }
    const blob = new Blob([lastHTML], {type:"text/html"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = "profile_page.html";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}
</script>
</body>
</html>
